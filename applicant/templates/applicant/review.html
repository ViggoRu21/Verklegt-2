{% extends "applicant/base_generic_app.html" %}

{% block title %}
    <title> Profile </title>
{% endblock %}

{% block content %}

    <div class="title">
        <a href="{% url 'applicant:listings' %}">
            <h1 class="title">SalarySleuth</h1>
        </a>
        <br>
        <h2 class="sub_title" id="test" onclick="testFunction()">Your Profile</h2>
    </div>

    <div class="forms_wrapper">
        <form method="post" enctype="multipart/form-data" class="forms_profile">
            {% csrf_token %}

        <div class="card_review_head">
            <p> {{ applicant }} </p>
            <p> <strong>Phone Number: </strong> {{ applicant.phone_number }} </p>
            <p> <strong>Address: </strong> {{ applicant.country}}, {{ applicant.postal_code }}, {{ applicant.city }}, {{ applicant.street_name }}, {{ applicant.house_number }} </p>
        </div>

        <div class="card_review_listings" id="card_review_listings">
            <select id="card_review_select">
                <option value="card_review_recommendations">Recommendations</option>
                <option value="card_review_educations">Education</option>
                <option value="card_review_experiences">Experience</option>
            </select>
            <div class="card_review_listings_hide" id="card_review_experiences">
                <p><strong>Work Experience:</strong> <br>
                    {% for experience in form_data.work_experience %}
                        <ul>
                            <li><p>{{ experience.company_name }}</p></li>
                            <li><p>{{ experience.role }}</p></li>
                            <li><p>{{ experience.start_date }}</p></li>
                            <li><p>{{ experience.end_date }}</p></li>
                        </ul>
                    {% endfor %}
                </p>
            </div>
    
            <div class="card_review_listings_hide" id="card_review_educations">
                <p><strong>Education:</strong> <br>
                    <ul>
                        {% for education in form_data.education %}
                            <li><p>{{ education }}</p></li>
                        {% endfor %}
                    </ul>
                </p>
            </div>
    
            <div class="card_review_listings">
                <div class="card_review_listings_show" id="card_review_recommendations">
                    <p><strong>Recommendations:</strong> <br>
                        {% for recommendation in form_data.recommendations %}
                            <ul>
                                <li><p>{{ recommendation.name }}</p></li>
                                <li><p>{{ recommendation.company_name }}</p></li>
                                <li><p>{{ recommendation.role }}</p></li>
                                <li><p>{{ recommendation.email }}</p></li>
                                <li><p>{{ recommendation.phone_number }}</p></li>
                                {% if recommendation.can_be_contacted %}
                                    
                                    <li><p> Can Contact </p></li>
                                    
                                    {% else %}
                                    
                                        <li><p> Don't Contact </p></li>
                                    
                                {% endif %}
                            </ul>
                            <br>
                        {% endfor %}
                    </p>
                </div>
            </div>
        </div>

            <div class="forms_container">
                {{ experience_formset.management_form }}
                {% for form in experience_formset reversed %}
                    {% if forloop.first %}
                        <div class="form_instance" id="{{ form.prefix }}">
                            <h2>Work Experience</h2>
                            {{ form.non_field_errors }}
                            {% for field in form %}
                                {% if field.name != 'DELETE' and field.name != 'id' and field.name != 'applicant' %}
                                    <div class="field_wrapper">
                                        {{ field.label_tag }}
                                        {{ field }}
                                        {{ field.errors }}
                                    </div>
                                {% endif %}
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="form_instance_2" id="{{ form.prefix }}">
                            <h2>Experience: {{ forloop.counter0 }}</h2>
                            {{ form.as_p }}
                        </div>
                    {% endif %}
                {% endfor %}
            </div>

            <div class="forms_container">
                {{ recommendation_formset.management_form }}
                {% for form in recommendation_formset reversed %}
                    {% if forloop.first %}
                        <div class="form_instance" id="{{ form.prefix }}">
                            <h2>Recommender</h2>
                            {{ form.non_field_errors }}
                            {% for field in form %}
                                {% if field.name != 'DELETE' and field.name != 'id' and field.name != 'applicant' %}
                                    <div class="field_wrapper">
                                        {{ field.label_tag }}
                                        {{ field }}
                                        {{ field.errors }}
                                    </div>
                                {% endif %}
                            {% endfor %}
                            <br>
                        </div>
                    {% else %}
                        <div class="form_instance_2" id="{{ form.prefix }}">
                            <h2>Recommender: {{ forloop.counter0 }}</h2>
                            {{ form.as_p }}
                        </div>
                    {% endif %}
                {% endfor %}
            </div>

            <button type="submit" class="submit">Save</button>
        </form>
    </div>

{% endblock %}
